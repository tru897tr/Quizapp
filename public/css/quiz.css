.quiz-container{
    min-height:100vh;
    display:flex;
    flex-direction:column;
    background:linear-gradient(180deg,#f8fafc 0%,#f1f5f9 100%);
}

.quiz-header{
    background:rgba(255,255,255,0.95);
    padding:20px 28px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    border-bottom:1px solid var(--border);
    box-shadow:0 2px 12px rgba(0,0,0,0.05);
    backdrop-filter:blur(20px);
    -webkit-backdrop-filter:blur(20px);
    position:sticky;
    top:0;
    z-index:100;
}

.quiz-logo{
    font-weight:700;
    font-size:20px;
    color:var(--dark);
    cursor:pointer;
    transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
    position:relative;
}

.quiz-logo::after{
    content:'';
    position:absolute;
    bottom:-4px;
    left:0;
    width:0;
    height:3px;
    background:linear-gradient(90deg,var(--primary),var(--secondary));
    transition:width 0.3s cubic-bezier(0.4,0,0.2,1);
    border-radius:2px;
}

.quiz-logo:hover::after{
    width:100%;
}

.quiz-logo:hover{
    color:var(--primary);
    transform:translateY(-2px);
}

.quiz-user{
    display:flex;
    align-items:center;
    gap:14px;
    font-size:15px;
    color:var(--dark);
    font-weight:600;
}

.btn-icon{
    width:42px;
    height:42px;
    border:none;
    background:var(--light-gray);
    border-radius:10px;
    cursor:pointer;
    font-size:20px;
    display:flex;
    align-items:center;
    justify-content:center;
    transition:all 0.3s cubic-bezier(0.68,-0.55,0.265,1.55);
    position:relative;
}

.btn-icon::before{
    content:'';
    position:absolute;
    inset:0;
    border-radius:10px;
    background:var(--primary);
    opacity:0;
    transition:opacity 0.3s cubic-bezier(0.4,0,0.2,1);
}

.btn-icon:hover::before{
    opacity:0.1;
}

.btn-icon:hover{
    transform:scale(1.12) rotate(8deg);
    box-shadow:0 4px 12px rgba(0,0,0,0.1);
}

.btn-icon:active{
    transform:scale(1.05) rotate(4deg);
}

.quiz-stats{
    display:flex;
    gap:20px;
    padding:28px;
    justify-content:center;
    flex-wrap:wrap;
}

.stat-card{
    background:var(--white);
    padding:24px 40px;
    border-radius:16px;
    text-align:center;
    border:1px solid var(--border);
    transition:all 0.4s cubic-bezier(0.4,0,0.2,1);
    position:relative;
    overflow:hidden;
    box-shadow:0 2px 8px rgba(0,0,0,0.05);
}

.stat-card::before{
    content:'';
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background:linear-gradient(135deg,rgba(99,102,241,0.05),rgba(139,92,246,0.05));
    opacity:0;
    transition:opacity 0.4s cubic-bezier(0.4,0,0.2,1);
}

.stat-card:hover::before{
    opacity:1;
}

.stat-card:hover{
    transform:translateY(-6px) scale(1.02);
    box-shadow:0 12px 24px rgba(99,102,241,0.15);
    border-color:rgba(99,102,241,0.3);
}

.stat-label{
    font-size:14px;
    color:var(--gray);
    margin-bottom:10px;
    font-weight:600;
    text-transform:uppercase;
    letter-spacing:0.5px;
    position:relative;
    z-index:1;
}

.stat-value{
    font-size:32px;
    font-weight:700;
    background:linear-gradient(135deg,var(--primary),var(--secondary));
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    background-clip:text;
    position:relative;
    z-index:1;
    font-variant-numeric:tabular-nums;
}

.progress-bar{
    height:6px;
    background:var(--border);
    margin:0 28px;
    border-radius:3px;
    overflow:hidden;
}

.progress-fill{
    height:100%;
    background:linear-gradient(90deg,var(--primary),var(--secondary));
    transition:width 0.5s cubic-bezier(0.4,0,0.2,1);
    position:relative;
}

.progress-fill::after{
    content:'';
    position:absolute;
    top:0;
    right:0;
    bottom:0;
    width:40px;
    background:linear-gradient(90deg,transparent,rgba(255,255,255,0.4));
    animation:shimmer 1.5s infinite;
}

@keyframes shimmer{
    0%{transform:translateX(-100%)}
    100%{transform:translateX(100%)}
}

#quizArea{
    flex:1;
    padding:32px;
    max-width:950px;
    margin:0 auto;
    width:100%;
    overflow-y:auto;
}

.question-card{
    background:var(--white);
    border-radius:20px;
    padding:48px;
    margin-bottom:32px;
    border:1px solid var(--border);
    box-shadow:0 8px 24px rgba(0,0,0,0.08);
    animation:slideInUp 0.5s cubic-bezier(0.68,-0.55,0.265,1.55);
    position:relative;
    overflow:hidden;
}

.question-card::before{
    content:'';
    position:absolute;
    top:0;
    left:0;
    right:0;
    height:5px;
    background:linear-gradient(90deg,var(--primary),var(--secondary));
}

@keyframes slideInUp{
    from{
        opacity:0;
        transform:translateY(40px) scale(0.95);
    }
    to{
        opacity:1;
        transform:translateY(0) scale(1);
    }
}

.question-text{
    font-size:24px;
    font-weight:600;
    color:var(--dark);
    line-height:1.6;
    margin-bottom:40px;
    padding-bottom:28px;
    border-bottom:2px solid var(--light-gray);
    position:relative;
}

.question-text::after{
    content:'?';
    position:absolute;
    right:0;
    bottom:-20px;
    width:40px;
    height:40px;
    background:linear-gradient(135deg,var(--primary),var(--secondary));
    border-radius:50%;
    display:flex;
    align-items:center;
    justify-content:center;
    color:white;
    font-size:24px;
    font-weight:700;
}

.options-grid{
    display:grid;
    gap:18px;
    margin-bottom:40px;
}

.option{
    padding:24px 28px;
    border:3px solid var(--border);
    border-radius:14px;
    cursor:pointer;
    transition:all 0.3s cubic-bezier(0.68,-0.55,0.265,1.55);
    background:var(--white);
    display:flex;
    align-items:center;
    gap:18px;
    position:relative;
    overflow:hidden;
}

.option::before{
    content:'';
    position:absolute;
    top:0;
    left:0;
    width:0;
    height:100%;
    background:linear-gradient(90deg,rgba(99,102,241,0.08),transparent);
    transition:width 0.4s cubic-bezier(0.4,0,0.2,1);
    z-index:0;
}

.option:hover:not(.correct):not(.wrong):not(.disabled)::before{
    width:100%;
}

.option:hover:not(.correct):not(.wrong):not(.disabled){
    border-color:var(--primary);
    transform:translateX(10px) scale(1.02);
    box-shadow:0 8px 24px rgba(99,102,241,0.25);
}

.option-label{
    min-width:44px;
    height:44px;
    border-radius:50%;
    background:var(--light-gray);
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight:700;
    color:var(--gray);
    flex-shrink:0;
    font-size:18px;
    transition:all 0.3s cubic-bezier(0.68,-0.55,0.265,1.55);
    position:relative;
    z-index:1;
}

.option > div:last-child{
    position:relative;
    z-index:1;
    font-size:17px;
    line-height:1.6;
    font-weight:500;
}

/* ENHANCED: Crystal clear correct answer */
.option.correct{
    border-color:#10b981;
    border-width:4px;
    background:linear-gradient(135deg,#d1fae5 0%,#a7f3d0 50%,#6ee7b7 100%);
    animation:correctPulse 0.8s cubic-bezier(0.68,-0.55,0.265,1.55);
    box-shadow:0 0 0 4px rgba(16,185,129,0.2),0 12px 32px rgba(16,185,129,0.4);
    transform:scale(1.03);
}

@keyframes correctPulse{
    0%{
        transform:scale(1);
        box-shadow:0 0 0 0 rgba(16,185,129,0.7);
    }
    50%{
        transform:scale(1.08);
        box-shadow:0 0 0 8px rgba(16,185,129,0);
    }
    100%{
        transform:scale(1.03);
        box-shadow:0 0 0 4px rgba(16,185,129,0.2);
    }
}

.option.correct .option-label{
    background:linear-gradient(135deg,#10b981,#059669);
    color:#fff;
    font-size:0;
    box-shadow:0 4px 12px rgba(16,185,129,0.4);
    animation:checkmarkBounce 0.6s cubic-bezier(0.68,-0.55,0.265,1.55) 0.2s;
}

.option.correct .option-label::after{
    content:'✓';
    position:absolute;
    font-size:26px;
    font-weight:900;
    animation:checkmarkPop 0.5s cubic-bezier(0.68,-0.55,0.265,1.55) 0.2s;
}

@keyframes checkmarkBounce{
    0%{transform:scale(1) rotate(0deg)}
    50%{transform:scale(1.3) rotate(15deg)}
    100%{transform:scale(1) rotate(0deg)}
}

@keyframes checkmarkPop{
    0%{
        transform:scale(0) rotate(-45deg);
        opacity:0;
    }
    60%{
        transform:scale(1.2) rotate(10deg);
        opacity:1;
    }
    100%{
        transform:scale(1) rotate(0deg);
        opacity:1;
    }
}

.option.correct > div:last-child{
    font-weight:700;
    color:#065f46;
}

/* ENHANCED: Crystal clear wrong answer */
.option.wrong{
    border-color:#ef4444;
    border-width:4px;
    background:linear-gradient(135deg,#fee2e2 0%,#fecaca 50%,#fca5a5 100%);
    animation:wrongShake 0.6s cubic-bezier(0.68,-0.55,0.265,1.55);
    opacity:0.75;
    cursor:not-allowed;
    box-shadow:0 0 0 4px rgba(239,68,68,0.2),0 12px 32px rgba(239,68,68,0.3);
}

@keyframes wrongShake{
    0%,100%{transform:translateX(0) rotate(0deg)}
    10%,30%,50%,70%,90%{transform:translateX(-8px) rotate(-2deg)}
    20%,40%,60%,80%{transform:translateX(8px) rotate(2deg)}
}

.option.wrong .option-label{
    background:linear-gradient(135deg,#ef4444,#dc2626);
    color:#fff;
    font-size:0;
    box-shadow:0 4px 12px rgba(239,68,68,0.4);
    animation:crossBounce 0.6s cubic-bezier(0.68,-0.55,0.265,1.55) 0.2s;
}

.option.wrong .option-label::after{
    content:'✗';
    position:absolute;
    font-size:26px;
    font-weight:900;
    animation:crossPop 0.5s cubic-bezier(0.68,-0.55,0.265,1.55) 0.2s;
}

@keyframes crossBounce{
    0%{transform:scale(1) rotate(0deg)}
    50%{transform:scale(1.3) rotate(-15deg)}
    100%{transform:scale(1) rotate(0deg)}
}

@keyframes crossPop{
    0%{
        transform:scale(0) rotate(45deg);
        opacity:0;
    }
    60%{
        transform:scale(1.2) rotate(-10deg);
        opacity:1;
    }
    100%{
        transform:scale(1) rotate(0deg);
        opacity:1;
    }
}

.option.wrong > div:last-child{
    font-weight:600;
    color:#991b1b;
    text-decoration:line-through;
}

.option.disabled{
    cursor:not-allowed;
    opacity:0.9;
}

.quiz-navigation{
    display:flex;
    gap:18px;
    margin-top:40px;
}

.nav-button{
    flex:1;
    padding:20px;
    border:none;
    border-radius:14px;
    font-weight:600;
    font-size:17px;
    cursor:pointer;
    transition:all 0.3s cubic-bezier(0.68,-0.55,0.265,1.55);
    position:relative;
    overflow:hidden;
}

.nav-button::before{
    content:'';
    position:absolute;
    top:50%;
    left:50%;
    width:0;
    height:0;
    border-radius:50%;
    background:rgba(255,255,255,0.4);
    transform:translate(-50%,-50%);
    transition:width 0.6s ease,height 0.6s ease;
}

.nav-button:hover::before{
    width:400px;
    height:400px;
}

.nav-button.prev{
    background:var(--white);
    border:3px solid var(--border);
    color:var(--dark);
}

.nav-button.prev:hover:not(:disabled){
    border-color:var(--primary);
    color:var(--primary);
}

.nav-button.next{
    background:linear-gradient(135deg,var(--primary),var(--secondary));
    color:var(--white);
    box-shadow:0 6px 20px rgba(99,102,241,0.4);
}

.nav-button:disabled{
    opacity:0.4;
    cursor:not-allowed;
    transform:none !important;
}

.nav-button:hover:not(:disabled){
    transform:translateY(-4px) scale(1.02);
    box-shadow:0 12px 28px rgba(0,0,0,0.2);
}

.nav-button:active:not(:disabled){
    transform:translateY(-2px) scale(1);
}

/* Result screen with celebration */
.result-screen{
    background:var(--white);
    border-radius:20px;
    padding:70px 60px;
    text-align:center;
    border:1px solid var(--border);
    box-shadow:0 12px 40px rgba(0,0,0,0.12);
    animation:resultAppear 0.8s cubic-bezier(0.68,-0.55,0.265,1.55);
    position:relative;
    overflow:hidden;
}

.result-screen::before{
    content:'';
    position:absolute;
    top:-50%;
    left:-50%;
    width:200%;
    height:200%;
    background:conic-gradient(from 0deg,transparent,rgba(99,102,241,0.1),transparent 30%);
    animation:rotate 4s linear infinite;
}

@keyframes rotate{
    to{transform:rotate(360deg)}
}

@keyframes resultAppear{
    from{
        opacity:0;
        transform:scale(0.8) rotate(-5deg);
    }
    to{
        opacity:1;
        transform:scale(1) rotate(0deg);
    }
}

.result-icon{
    font-size:120px;
    margin-bottom:32px;
    animation:celebrationBounce 1s ease-in-out infinite;
    position:relative;
    z-index:1;
    filter:drop-shadow(0 8px 16px rgba(0,0,0,0.15));
}

@keyframes celebrationBounce{
    0%,100%{transform:translateY(0) scale(1) rotate(0deg)}
    25%{transform:translateY(-20px) scale(1.1) rotate(-5deg)}
    50%{transform:translateY(0) scale(1) rotate(0deg)}
    75%{transform:translateY(-10px) scale(1.05) rotate(5deg)}
}

.result-title{
    font-size:48px;
    font-weight:800;
    margin-bottom:20px;
    background:linear-gradient(135deg,var(--primary),var(--secondary));
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    background-clip:text;
    position:relative;
    z-index:1;
}

.result-time{
    font-size:64px;
    font-weight:800;
    background:linear-gradient(135deg,var(--primary),var(--secondary));
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    background-clip:text;
    margin:40px 0;
    font-variant-numeric:tabular-nums;
    filter:drop-shadow(0 4px 12px rgba(99,102,241,0.3));
    position:relative;
    z-index:1;
}

.result-stats{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
    gap:24px;
    margin:48px 0;
    position:relative;
    z-index:1;
}

.result-stat{
    background:linear-gradient(135deg,var(--light-gray),#e8eaf6);
    padding:28px;
    border-radius:16px;
    transition:all 0.3s cubic-bezier(0.68,-0.55,0.265,1.55);
    border:2px solid transparent;
}

.result-stat:hover{
    transform:translateY(-6px) scale(1.05);
    box-shadow:0 12px 24px rgba(99,102,241,0.2);
    border-color:rgba(99,102,241,0.3);
}

.result-stat-label{
    font-size:14px;
    color:var(--gray);
    margin-bottom:10px;
    font-weight:600;
    text-transform:uppercase;
    letter-spacing:0.5px;
}

.result-stat-value{
    font-size:32px;
    font-weight:800;
    color:var(--dark);
}

.result-buttons{
    display:flex;
    gap:18px;
    justify-content:center;
    margin-top:48px;
    position:relative;
    z-index:1;
}

/* Fullscreen mode enhancements */
body.fullscreen-mode{
    overflow:hidden;
}

.fullscreen-mode .quiz-container{
    position:fixed;
    inset:0;
    z-index:9999;
    background:linear-gradient(135deg,#1e293b 0%,#0f172a 100%);
}

.fullscreen-mode .quiz-header{
    display:none;
}

.fullscreen-mode .quiz-stats{
    display:none !important;
}

.fullscreen-mode .progress-bar{
    position:fixed;
    top:0;
    left:0;
    right:0;
    height:5px;
    margin:0;
    z-index:10000;
    background:rgba(255,255,255,0.1);
}

.fullscreen-mode #quizArea{
    padding:48px;
    height:100vh;
    overflow-y:auto;
}

.fullscreen-mode .question-card{
    height:calc(100vh - 96px);
    display:flex;
    flex-direction:column;
    padding:56px;
    margin:0;
    background:rgba(255,255,255,0.95);
}

.fullscreen-mode .question-text{
    font-size:40px;
    text-align:center;
    margin-bottom:56px;
    color:#fff;
    text-shadow:0 2px 8px rgba(0,0,0,0.3);
}

.fullscreen-mode .options-grid{
    display:grid;
    grid-template-columns:1fr 1fr;
    grid-template-rows:1fr 1fr;
    gap:28px;
    flex:1;
}

.fullscreen-mode .option{
    font-size:24px;
    padding:48px;
    justify-content:center;
    text-align:center;
    min-height:140px;
    border-width:4px;
}

.fullscreen-mode .option:nth-child(1){
    background:linear-gradient(135deg,#fef3c7,#fde047);
    border-color:#eab308;
}

.fullscreen-mode .option:nth-child(2){
    background:linear-gradient(135deg,#dbeafe,#60a5fa);
    border-color:#3b82f6;
}

.fullscreen-mode .option:nth-child(3){
    background:linear-gradient(135deg,#d1fae5,#34d399);
    border-color:#10b981;
}

.fullscreen-mode .option:nth-child(4){
    background:linear-gradient(135deg,#fce7f3,#f472b6);
    border-color:#ec4899;
}

.fullscreen-exit-btn{
    position:fixed;
    bottom:32px;
    right:32px;
    width:56px;
    height:56px;
    background:rgba(0,0,0,0.6);
    color:white;
    border:none;
    border-radius:50%;
    font-size:28px;
    cursor:pointer;
    opacity:0.4;
    transition:all 0.3s cubic-bezier(0.68,-0.55,0.265,1.55);
    z-index:10001;
    display:none;
    backdrop-filter:blur(10px);
}

.fullscreen-mode .fullscreen-exit-btn{
    display:flex;
    align-items:center;
    justify-content:center;
}

.fullscreen-exit-btn:hover{
    opacity:1;
    background:rgba(0,0,0,0.9);
    transform:scale(1.15) rotate(90deg);
}

/* Responsive refinements */
@media (max-width:768px){
    .fullscreen-mode .options-grid{
        grid-template-columns:1fr;
        grid-template-rows:repeat(4,1fr);
    }
    
    .fullscreen-mode .question-text{
        font-size:28px;
    }
    
    .question-card{
        padding:36px 28px;
    }
    
    .quiz-stats{
        flex-wrap:wrap;
        padding:20px;
        gap:16px;
    }
    
    .stat-card{
        padding:20px 28px;
    }
}

@media (max-width:480px){
    .question-text{
        font-size:20px;
    }
    
    .option{
        padding:18px 20px;
        gap:14px;
    }
    
    .option-label{
        min-width:36px;
        height:36px;
        font-size:16px;
    }
    
    .option > div:last-child{
        font-size:15px;
    }
    
    .result-screen{
        padding:48px 32px;
    }
    
    .result-icon{
        font-size:80px;
    }
    
    .result-title{
        font-size:32px;
    }
    
    .result-time{
        font-size:48px;
    }
}

/* Accessibility improvements */
@media (prefers-reduced-motion:reduce){
    *,*::before,*::after{
        animation-duration:0.01ms !important;
        animation-iteration-count:1 !important;
        transition-duration:0.01ms !important;
    }
}
